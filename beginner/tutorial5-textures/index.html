<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Textures and bind groups | Learn Wgpu</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.3.1">
    
    <meta property="article:modified_time" content="2020-02-24T23:23:23.000Z"><meta property="og:site_name" content="Learn Wgpu"><meta property="og:title" content="Textures and bind groups"><meta property="og:type" content="website"><meta property="og:url" content="/beginner/tutorial5-textures/"><meta name="twitter:title" content="Textures and bind groups"><meta name="twitter:url" content="/beginner/tutorial5-textures/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Benjamin R Hansen"><meta name="twitter:creator" content="https://twitter.com/sotrh760">
    <link rel="preload" href="/learn-wgpu/assets/css/0.styles.f819bcb6.css" as="style"><link rel="preload" href="/learn-wgpu/assets/js/app.37ce17b6.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/2.08ab0899.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/3.7ed3767e.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/15.d4e54dff.js" as="script"><link rel="prefetch" href="/learn-wgpu/assets/js/10.d6298df0.js"><link rel="prefetch" href="/learn-wgpu/assets/js/11.40391db3.js"><link rel="prefetch" href="/learn-wgpu/assets/js/12.6b207e74.js"><link rel="prefetch" href="/learn-wgpu/assets/js/13.a4373cdd.js"><link rel="prefetch" href="/learn-wgpu/assets/js/14.e63e07b6.js"><link rel="prefetch" href="/learn-wgpu/assets/js/16.71fad022.js"><link rel="prefetch" href="/learn-wgpu/assets/js/17.f9d9ed22.js"><link rel="prefetch" href="/learn-wgpu/assets/js/18.34af9e75.js"><link rel="prefetch" href="/learn-wgpu/assets/js/19.d0f7c4fc.js"><link rel="prefetch" href="/learn-wgpu/assets/js/20.3e9f0e56.js"><link rel="prefetch" href="/learn-wgpu/assets/js/21.3456e76f.js"><link rel="prefetch" href="/learn-wgpu/assets/js/22.03a1d93f.js"><link rel="prefetch" href="/learn-wgpu/assets/js/23.99131bb5.js"><link rel="prefetch" href="/learn-wgpu/assets/js/4.4de3638a.js"><link rel="prefetch" href="/learn-wgpu/assets/js/5.d05d69aa.js"><link rel="prefetch" href="/learn-wgpu/assets/js/6.9922d581.js"><link rel="prefetch" href="/learn-wgpu/assets/js/7.e56a57cf.js"><link rel="prefetch" href="/learn-wgpu/assets/js/8.cde71275.js"><link rel="prefetch" href="/learn-wgpu/assets/js/9.0dba9781.js">
    <link rel="stylesheet" href="/learn-wgpu/assets/css/0.styles.f819bcb6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="inner"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-wgpu/" class="home-link router-link-active"><!----> <span class="site-name">Learn Wgpu</span></a> <div class="links"><!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="docs-layout"><aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/learn-wgpu/" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Beginner</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu/beginner/tutorial1-window/" class="sidebar-link">Dependencies and the window</a></li><li><a href="/learn-wgpu/beginner/tutorial2-swapchain/" class="sidebar-link">The Swapchain</a></li><li><a href="/learn-wgpu/beginner/tutorial3-pipeline/" class="sidebar-link">The Pipeline</a></li><li><a href="/learn-wgpu/beginner/tutorial4-buffer/" class="sidebar-link">Buffers and Indices</a></li><li><a href="/learn-wgpu/beginner/tutorial5-textures/" class="active sidebar-link">Textures and bind groups</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#loading-an-image-from-a-file" class="sidebar-link">Loading an image from a file</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#getting-data-into-a-texture" class="sidebar-link">Getting data into a Texture</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#textureviews-and-samplers" class="sidebar-link">TextureViews and Samplers</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#the-bindgroup" class="sidebar-link">The BindGroup</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#pipelinelayout" class="sidebar-link">PipelineLayout</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#a-change-to-the-vertices" class="sidebar-link">A change to the VERTICES</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#shader-time" class="sidebar-link">Shader time</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#the-results" class="sidebar-link">The results</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#cleaning-things-up" class="sidebar-link">Cleaning things up</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial5-textures/#challenge" class="sidebar-link">Challenge</a></li></ul></li><li><a href="/learn-wgpu/beginner/tutorial6-uniforms/" class="sidebar-link">Uniform buffers and a 3d camera</a></li><li><a href="/learn-wgpu/beginner/tutorial7-instancing/" class="sidebar-link">Instancing</a></li><li><a href="/learn-wgpu/beginner/tutorial8-depth/" class="sidebar-link">The Depth Buffer</a></li><li><a href="/learn-wgpu/beginner/tutorial9-models/" class="sidebar-link">Model Loading</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Intermediate</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu/intermediate/tutorial10-lighting/" class="sidebar-link">Working with Lights</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Showcase</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/learn-wgpu/news/" class="sidebar-link">News</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="textures-and-bind-groups"><a href="#textures-and-bind-groups" class="header-anchor">#</a> Textures and bind groups</h1> <p>Up to this point we have been drawing super simple shapes. While we can make a game with just triangles, but trying to draw highly detailed objects would massively limit what devices could even run our game. We can get around this problem with textures. Textures are images overlayed over a triangle mesh to make the mesh seem more detailed. There are multiple types of textures such as normal maps, bump maps, specular maps, and diffuse maps. We're going to talk about diffuse maps, or in laymens terms, the color texture.</p> <h2 id="loading-an-image-from-a-file"><a href="#loading-an-image-from-a-file" class="header-anchor">#</a> Loading an image from a file</h2> <p>If we want to map an image to our mesh, we first need an image. Let's use this happy little tree.</p> <p><img src="/learn-wgpu/assets/img/happy-tree.bdff8a19.png" alt="a happy tree"></p> <p>We'll use the <a href="https://crates.io/crates/image" target="_blank" rel="noopener noreferrer">image crate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to load our tree. In <code>State</code>'s <code>new()</code> method add the following just after creating the <code>swap_chain</code>:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> diffuse_bytes <span class="token operator">=</span> <span class="token function">include_bytes!</span><span class="token punctuation">(</span><span class="token string">&quot;happy-tree.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_image <span class="token operator">=</span> image<span class="token punctuation">::</span><span class="token function">load_from_memory</span><span class="token punctuation">(</span>diffuse_bytes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_rgba <span class="token operator">=</span> diffuse_image<span class="token punctuation">.</span><span class="token function">as_rgba8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> image<span class="token punctuation">::</span>GenericImageView<span class="token punctuation">;</span>
<span class="token keyword">let</span> dimensions <span class="token operator">=</span> diffuse_image<span class="token punctuation">.</span><span class="token function">dimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Here we just grab the bytes from our image file, and load them into an image, which we then convert into a <code>Vec</code> of rgba bytes. We also save the image's dimensions for when we create the actual <code>Texture</code>. Speaking of creating the actual <code>Texture</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> size <span class="token operator">=</span> wgpu<span class="token punctuation">::</span>Extent3d <span class="token punctuation">{</span>
    width<span class="token punctuation">:</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
    depth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> diffuse_texture <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_texture</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>TextureDescriptor <span class="token punctuation">{</span>
    <span class="token comment">// All textures are stored as 3d, we represent our 2d texture</span>
    <span class="token comment">// by setting depth to 1.</span>
    size<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>Extent3d <span class="token punctuation">{</span>
        width<span class="token punctuation">:</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span>
        height<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
        depth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// You can store multiple textures of the same size in one</span>
    <span class="token comment">// Texture object</span>
    array_layer_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    mip_level_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// We'll talk about this a little later</span>
    sample_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    dimension<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureDimension<span class="token punctuation">::</span>D2<span class="token punctuation">,</span>
    format<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureFormat<span class="token punctuation">::</span>Rgba8UnormSrgb<span class="token punctuation">,</span>
    <span class="token comment">// SAMPLED tells wgpu that we want to use this texture in shaders</span>
    <span class="token comment">// COPY_DST means that we want to copy data to this texture</span>
    usage<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureUsage<span class="token punctuation">::</span>SAMPLED <span class="token operator">|</span> wgpu<span class="token punctuation">::</span>TextureUsage<span class="token punctuation">::</span>COPY_DST<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="getting-data-into-a-texture"><a href="#getting-data-into-a-texture" class="header-anchor">#</a> Getting data into a Texture</h2> <p>The <code>Texture</code> struct has no methods to interact with the data directly. We actually need to load the data into a <code>Buffer</code> and copy it into the <code>Texture</code>. First we need to create a buffer big enough to hold our texture data. Luckily we have <code>diffuse_rgba</code>!</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> diffuse_buffer <span class="token operator">=</span> device
    <span class="token punctuation">.</span><span class="token function">create_buffer_mapped</span><span class="token punctuation">(</span>diffuse_rgba<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wgpu<span class="token punctuation">::</span>BufferUsage<span class="token punctuation">::</span>COPY_SRC<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">fill_from_slice</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_rgba<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We specified our <code>diffuse_buffer</code> to be <code>COPY_SRC</code> so that we can copy it to our <code>diffuse_texture</code>. We preform the copy using a <code>CommandEncoder</code>. We'll need to change <code>queue</code>'s mutablility so we can submit the resulting <code>CommandBuffer</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token punctuation">(</span>device<span class="token punctuation">,</span> <span class="token keyword">mut</span> queue<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token comment">// ...</span>

<span class="token comment">// ...</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span> encoder <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_command_encoder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>CommandEncoderDescriptor <span class="token punctuation">{</span>
    todo<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

encoder<span class="token punctuation">.</span><span class="token function">copy_buffer_to_texture</span><span class="token punctuation">(</span>
    wgpu<span class="token punctuation">::</span>BufferCopyView <span class="token punctuation">{</span>
        buffer<span class="token punctuation">:</span> <span class="token operator">&amp;</span>diffuse_buffer<span class="token punctuation">,</span>
        offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        row_pitch<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token operator">*</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span> <span class="token comment">// the width of the texture in bytes</span>
        image_height<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    wgpu<span class="token punctuation">::</span>TextureCopyView <span class="token punctuation">{</span>
        texture<span class="token punctuation">:</span> <span class="token operator">&amp;</span>diffuse_texture<span class="token punctuation">,</span>
        mip_level<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        array_layer<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        origin<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>Origin3d<span class="token punctuation">::</span>ZERO<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    size<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

device<span class="token punctuation">.</span><span class="token function">get_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">[</span>encoder<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="textureviews-and-samplers"><a href="#textureviews-and-samplers" class="header-anchor">#</a> TextureViews and Samplers</h2> <p>Now that our texture has data in it, we need a way to use it. This is where a <code>TextureView</code> and a <code>Sampler</code>. A <code>TextureView</code> offers us a <em>view</em> into our texture. A <code>Sampler</code> controls how the <code>Texture</code> is <em>sampled</em>. Sampling works similar to the eyedropper tool in Gimp/Photoshop. Our program supplies a coordinate on the texture (known as a texture coordinate), and the sampler then returns a color back based on it's internal parameters.</p> <p>Let's define our <code>diffuse_texture_view</code> and <code>diffuse_sampler</code> now.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// We don't need to configure the texture view much, so let's</span>
<span class="token comment">// let wgpu define it.</span>
<span class="token keyword">let</span> diffuse_texture_view <span class="token operator">=</span> diffuse_texture<span class="token punctuation">.</span><span class="token function">create_default_view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> diffuse_sampler <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_sampler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>SamplerDescriptor <span class="token punctuation">{</span>
    address_mode_u<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>AddressMode<span class="token punctuation">::</span>ClampToEdge<span class="token punctuation">,</span>
    address_mode_v<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>AddressMode<span class="token punctuation">::</span>ClampToEdge<span class="token punctuation">,</span>
    address_mode_w<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>AddressMode<span class="token punctuation">::</span>ClampToEdge<span class="token punctuation">,</span>
    mag_filter<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>FilterMode<span class="token punctuation">::</span>Linear<span class="token punctuation">,</span>
    min_filter<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>FilterMode<span class="token punctuation">::</span>Nearest<span class="token punctuation">,</span>
    mipmap_filter<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>FilterMode<span class="token punctuation">::</span>Nearest<span class="token punctuation">,</span>
    lod_min_clamp<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">100.0</span><span class="token punctuation">,</span>
    lod_max_clamp<span class="token punctuation">:</span> <span class="token number">100.0</span><span class="token punctuation">,</span>
    compare_function<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>CompareFunction<span class="token punctuation">::</span>Always<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>address_mode_*</code> parameter's determine what to do if the sampler get's a texture coordinate that's outside of the texture. There's a few that we can use.</p> <ul><li><code>ClampToEdge</code>: Any texture coordinates outside the texture will return the color of the nearest pixel on the edges of the texture.</li> <li><code>Repeat</code>: The texture will repeat as texture coordinates exceed the textures dimensions.</li> <li><code>MirrorRepeat</code>: Similar to <code>Repeat</code>, but the image will flip when going over boundaries.</li></ul> <p><img src="/learn-wgpu/assets/img/address_mode.66a7cd1a.png" alt="address_mode.png"></p> <p>The <code>mag_filter</code> and <code>min_filter</code> options describe what to do when a fragment covers multiple pixels, or there are multiple fragments for one pixel respectively. This often comes into play when viewing a surface from up close, or far away. There are 2 options:</p> <ul><li><code>Linear</code>: This option will attempt to blend the in-between fragments so that they seem to flow together.</li> <li><code>Nearest</code>: In-between fragments will use the color of the nearest pixel. This creates an image that's crisper from far away, but pixelated when view from close up. This can be desirable however if your textures are designed to be pixelated such is in pixel art games, or voxel games like Minecraft.</li></ul> <p>Mipmaps are a complex topic, and will require <a href="/todo">their own section</a>. Suffice to say <code>mipmap_filter</code> functions similar to <code>(mag/min)_filter</code> as it tells the sampler how to blend between mipmaps.</p> <p><code>lod_(min/max)_clamp</code> are also related to mipmapping, so will skip over them.</p> <p>The <code>compare_function</code> is often use in filtering. This is used in techniques such as <a href="/todo">shadow mapping</a>. We don't really care here, but the options are <code>Never</code>, <code>Less</code>, <code>Equal</code>, <code>LessEqual</code>, <code>Greater</code>, <code>NotEqual</code>, <code>GreaterEqual</code>, and <code>Always</code>.</p> <p>All these different resources are nice and all, but they doesn't do us much good if we can't plug them in anywhere. This is where <code>BindGroup</code>s and <code>PipelineLayout</code>s come in.</p> <h2 id="the-bindgroup"><a href="#the-bindgroup" class="header-anchor">#</a> The BindGroup</h2> <p>A <code>BindGroup</code> describes a set of resources and how they can be accessed by a shader. We create a <code>BindGroup</code> using a <code>BindGroupLayout</code>. Let's make one of those first.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> texture_bind_group_layout <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_bind_group_layout</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>BindGroupLayoutDescriptor <span class="token punctuation">{</span>
    bindings<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
        wgpu<span class="token punctuation">::</span>BindGroupLayoutBinding <span class="token punctuation">{</span>
            binding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            visibility<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>ShaderStage<span class="token punctuation">::</span>FRAGMENT<span class="token punctuation">,</span>
            ty<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindingType<span class="token punctuation">::</span>SampledTexture <span class="token punctuation">{</span>
                multisampled<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
                dimension<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureViewDimension<span class="token punctuation">::</span>D2<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        wgpu<span class="token punctuation">::</span>BindGroupLayoutBinding <span class="token punctuation">{</span>
            binding<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            visibility<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>ShaderStage<span class="token punctuation">::</span>FRAGMENT<span class="token punctuation">,</span>
            ty<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindingType<span class="token punctuation">::</span>Sampler<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Our <code>texture_bind_group_layout</code> has two bindings: one for a sampled texture at binding 0, and one for a sampler at binding 1. Both of these bindings are visible only to the fragment shader as specified by <code>FRAGMENT</code>. The possible values are any bit combination of <code>NONE</code>, <code>VERTEX</code>, <code>FRAGMENT</code>, or <code>COMPUTE</code>. Most of the time we'll only use <code>FRAGMENT</code> for textures and samplers, but it's good to know what's available.</p> <p>With <code>texture_bind_group_layout</code>, we can now create our <code>BindGroup</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> diffuse_bind_group <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_bind_group</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>BindGroupDescriptor <span class="token punctuation">{</span>
    layout<span class="token punctuation">:</span> <span class="token operator">&amp;</span>texture_bind_group_layout<span class="token punctuation">,</span>
    bindings<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
        wgpu<span class="token punctuation">::</span>Binding <span class="token punctuation">{</span>
            binding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            resource<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindingResource<span class="token punctuation">::</span><span class="token function">TextureView</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_texture_view<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        wgpu<span class="token punctuation">::</span>Binding <span class="token punctuation">{</span>
            binding<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            resource<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindingResource<span class="token punctuation">::</span><span class="token function">Sampler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_sampler<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Looking at this you might get a bit of déjà vu. That's because a <code>BindGroup</code> is a more specific declaration of the <code>BindGroupLayout</code>. The reason why these are separate is to allow us to swap out <code>BindGroup</code>s on the fly, so long as they all share the same <code>BindGroupLayout</code>. For each texture and sampler we create, we need to create a <code>BindGroup</code>.</p> <p>Now that we have our <code>diffuse_bind_group</code>, let's add our texture information to the <code>State</code> struct.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">struct</span> State <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    diffuse_texture<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>Texture<span class="token punctuation">,</span>
    diffuse_texture_view<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureView<span class="token punctuation">,</span>
    diffuse_sampler<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>Sampler<span class="token punctuation">,</span>
    diffuse_bind_group<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindGroup<span class="token punctuation">,</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>
<span class="token keyword">impl</span> State <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">Self</span> <span class="token punctuation">{</span>
            surface<span class="token punctuation">,</span>
            device<span class="token punctuation">,</span>
            queue<span class="token punctuation">,</span>
            sc_desc<span class="token punctuation">,</span>
            swap_chain<span class="token punctuation">,</span>
            render_pipeline<span class="token punctuation">,</span>
            vertex_buffer<span class="token punctuation">,</span>
            index_buffer<span class="token punctuation">,</span>
            num_indices<span class="token punctuation">,</span>
            diffuse_texture<span class="token punctuation">,</span>
            diffuse_texture_view<span class="token punctuation">,</span>
            diffuse_sampler<span class="token punctuation">,</span>
            diffuse_bind_group<span class="token punctuation">,</span>
            size<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>We actually use the bind group in the <code>render()</code> function.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// render()</span>
render_pass<span class="token punctuation">.</span><span class="token function">set_bind_group</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>diffuse_bind_group<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="pipelinelayout"><a href="#pipelinelayout" class="header-anchor">#</a> PipelineLayout</h2> <p>Remember the <code>PipelineLayout</code> we created back in <a href="/beginner/tutorial3-pipeline#how-do-we-use-the-shaders">the pipeline section</a>? This is finally the time when we get to actually use it. The <code>PipelineLayout</code> contains a list of <code>BindGroupLayout</code>s that the pipeline can use. Modify <code>render_pipeline_layout</code> to use our <code>texture_bind_group_layout</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> render_pipeline_layout <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_pipeline_layout</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>PipelineLayoutDescriptor <span class="token punctuation">{</span>
    bind_group_layouts<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>texture_bind_group_layout<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="a-change-to-the-vertices"><a href="#a-change-to-the-vertices" class="header-anchor">#</a> A change to the VERTICES</h2> <p>There's a few things we need to change about our <code>Vertex</code> definition. Up to now we've been using a <code>color</code> attribute to dictate the color of our mesh. Now that we're using a texture we want to replace our <code>color</code> with <code>tex_coords</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[repr(C)]</span>
<span class="token attribute attr-name">#[derive(Copy, Clone, Debug)]</span>
<span class="token keyword">struct</span> Vertex <span class="token punctuation">{</span>
    position<span class="token punctuation">:</span> <span class="token punctuation">[</span>f32<span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span>f32<span class="token punctuation">;</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We need to reflect these changes in the <code>VertexBufferDescriptor</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">impl</span> Vertex <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> desc<span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> wgpu<span class="token punctuation">::</span>VertexBufferDescriptor<span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'a</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">use</span> std<span class="token punctuation">::</span>mem<span class="token punctuation">;</span>
        wgpu<span class="token punctuation">::</span>VertexBufferDescriptor <span class="token punctuation">{</span>
            stride<span class="token punctuation">:</span> mem<span class="token punctuation">::</span>size_of<span class="token punctuation">::</span><span class="token operator">&lt;</span>Vertex<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> wgpu<span class="token punctuation">::</span>BufferAddress<span class="token punctuation">,</span>
            step_mode<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>InputStepMode<span class="token punctuation">::</span>Vertex<span class="token punctuation">,</span>
            attributes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
                wgpu<span class="token punctuation">::</span>VertexAttributeDescriptor <span class="token punctuation">{</span>
                    offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    shader_location<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    format<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>VertexFormat<span class="token punctuation">::</span>Float3<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                wgpu<span class="token punctuation">::</span>VertexAttributeDescriptor <span class="token punctuation">{</span>
                    offset<span class="token punctuation">:</span> mem<span class="token punctuation">::</span>size_of<span class="token punctuation">::</span><span class="token operator">&lt;</span><span class="token punctuation">[</span>f32<span class="token punctuation">;</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> wgpu<span class="token punctuation">::</span>BufferAddress<span class="token punctuation">,</span>
                    shader_location<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token comment">// We only need to change this to reflect that tex_coords</span>
                    <span class="token comment">// is only 2 floats and not 3. It's in the same position</span>
                    <span class="token comment">// as color was, so nothing else needs to change</span>
                    format<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>VertexFormat<span class="token punctuation">::</span>Float2<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Lastly we need to change <code>VERTICES</code> itself.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">const</span> VERTICES<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>Vertex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.0868241</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.49240386</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.4131759</span><span class="token punctuation">,</span> <span class="token number">0.99240386</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0048659444</span><span class="token punctuation">,</span> <span class="token number">0.56958646</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.28081453</span><span class="token punctuation">,</span> <span class="token number">0.050602943</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.35966998</span><span class="token punctuation">,</span> <span class="token number">0.3473291</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.85967</span><span class="token punctuation">,</span> <span class="token number">0.15267089</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// D</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.9414737</span><span class="token punctuation">,</span> <span class="token number">0.7347359</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="shader-time"><a href="#shader-time" class="header-anchor">#</a> Shader time</h2> <p>Our shaders will need to change inorder to support textures as well. We'll also need to remove any reference to the <code>color</code> attribute we used to have. Let's start with the vertex shader.</p> <div class="language-glsl extra-class"><pre class="language-glsl"><code><span class="token comment">// shader.vert</span>
<span class="token preprocessor builtin">#version</span> <span class="token number">450</span>

<span class="token keyword">layout</span><span class="token punctuation">(</span>location<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token keyword">vec3</span> a_position<span class="token punctuation">;</span>
<span class="token comment">// Changed</span>
<span class="token keyword">layout</span><span class="token punctuation">(</span>location<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token keyword">vec2</span> a_tex_coords<span class="token punctuation">;</span>

<span class="token comment">// Changed</span>
<span class="token keyword">layout</span><span class="token punctuation">(</span>location<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">out</span> <span class="token keyword">vec2</span> v_tex_coords<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Changed</span>
    v_tex_coords <span class="token operator">=</span> a_tex_coords<span class="token punctuation">;</span>
    gl_Position <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>a_position<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We need to change the fragment shader to take in <code>v_tex_coords</code>. We also need to add a reference to our texture and sampler.</p> <div class="language-glsl extra-class"><pre class="language-glsl"><code><span class="token comment">// shader.frag</span>
<span class="token preprocessor builtin">#version</span> <span class="token number">450</span>

<span class="token comment">// Changed</span>
<span class="token keyword">layout</span><span class="token punctuation">(</span>location<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token keyword">vec2</span> v_tex_coords<span class="token punctuation">;</span>
<span class="token keyword">layout</span><span class="token punctuation">(</span>location<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">out</span> <span class="token keyword">vec4</span> f_color<span class="token punctuation">;</span>

<span class="token comment">// New</span>
<span class="token keyword">layout</span><span class="token punctuation">(</span>set <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> binding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">uniform</span> texture2D t_diffuse<span class="token punctuation">;</span>
<span class="token keyword">layout</span><span class="token punctuation">(</span>set <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> binding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">uniform</span> sampler s_diffuse<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Changed</span>
    f_color <span class="token operator">=</span> <span class="token function">texture</span><span class="token punctuation">(</span><span class="token keyword">sampler2D</span><span class="token punctuation">(</span>t_diffuse<span class="token punctuation">,</span> s_diffuse<span class="token punctuation">)</span><span class="token punctuation">,</span> v_tex_coords<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You'll notice that <code>t_diffuse</code> and <code>s_diffuse</code> are defined with the <code>uniform</code> keyword, they don't have <code>in</code> nor <code>out</code>, and the layout definition uses <code>set</code> and <code>binding</code> instead of <code>location</code>. This is because <code>t_diffuse</code> and <code>s_diffuse</code> are what we call uniforms. We won't go too deep into what a uniform is, until we talk about uniform buffers in the <a href="/learn-wgpu/beginner/tutorial6-uniforms/">cameras section</a>. What we need to know, for now, is that <code>set = 0</code> corresponds to the 1st parameter in <code>set_bind_group</code>, <code>binding = 0</code> relates the the <code>binding</code> specified when we create the <code>BindGroupLayout</code> and <code>BindGroup</code>.</p> <h2 id="the-results"><a href="#the-results" class="header-anchor">#</a> The results</h2> <p>If we run our program now we should get the following result.</p> <p><img src="/learn-wgpu/assets/img/upside-down.d50c3643.png" alt="an upside down tree on a hexagon"></p> <p>That's weird, our tree is upside down! This is because wgpu's coordinate system has positive y values going down while texture coords have y as up.</p> <p><img src="/learn-wgpu/assets/img/happy-tree-uv-coords.87d49b85.png" alt="happy-tree-uv-coords.png"></p> <p>We can get our triangle right-side up by inverting the y coord of each texture coord.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">const</span> VERTICES<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>Vertex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.0868241</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.49240386</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.4131759</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.99240386</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0048659444</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.56958646</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.28081453</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.050602943</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.35966998</span><span class="token punctuation">,</span> <span class="token number">0.3473291</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.85967</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.15267089</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// D</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.9414737</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token number">0.7347359</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Simplifying that gives us.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">const</span> VERTICES<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>Vertex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.0868241</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.49240386</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.4131759</span><span class="token punctuation">,</span> <span class="token number">0.00759614</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// A</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.49513406</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.06958647</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.0048659444</span><span class="token punctuation">,</span> <span class="token number">0.43041354</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// B</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.21918549</span><span class="token punctuation">,</span> <span class="token number">0.44939706</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.28081453</span><span class="token punctuation">,</span> <span class="token number">0.949397057</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// C</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.35966998</span><span class="token punctuation">,</span> <span class="token number">0.3473291</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.85967</span><span class="token punctuation">,</span> <span class="token number">0.84732911</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// D</span>
    Vertex <span class="token punctuation">{</span> position<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.44147372</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.2347359</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tex_coords<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.9414737</span><span class="token punctuation">,</span> <span class="token number">0.2652641</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// E</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>With that in place we now have our tree subscribed right-side up on our hexagon.</p> <p><img src="/learn-wgpu/assets/img/rightside-up.75f852e2.png" alt="our happy tree as it should be"></p> <h2 id="cleaning-things-up"><a href="#cleaning-things-up" class="header-anchor">#</a> Cleaning things up</h2> <p>For convenience sake, let's pull our texture code into its own file called <code>texture.rs</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">use</span> image<span class="token punctuation">::</span>GenericImageView<span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">struct</span> Texture <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> texture<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>Texture<span class="token punctuation">,</span>
    <span class="token keyword">pub</span> view<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureView<span class="token punctuation">,</span>
    <span class="token keyword">pub</span> sampler<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>Sampler<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> Texture <span class="token punctuation">{</span>
    <span class="token comment">// 1.</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">from_bytes</span><span class="token punctuation">(</span>device<span class="token punctuation">:</span> <span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>Device<span class="token punctuation">,</span> bytes<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>u8<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Result<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">Self</span><span class="token punctuation">,</span> wgpu<span class="token punctuation">::</span>CommandBuffer<span class="token punctuation">)</span><span class="token punctuation">,</span> failure<span class="token punctuation">::</span>Error<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> img <span class="token operator">=</span> image<span class="token punctuation">::</span><span class="token function">load_from_memory</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token function">from_image</span><span class="token punctuation">(</span>device<span class="token punctuation">,</span> <span class="token operator">&amp;</span>img<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">from_image</span><span class="token punctuation">(</span>device<span class="token punctuation">:</span> <span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>Device<span class="token punctuation">,</span> img<span class="token punctuation">:</span> <span class="token operator">&amp;</span>image<span class="token punctuation">::</span>DynamicImage<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Result<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">Self</span><span class="token punctuation">,</span> wgpu<span class="token punctuation">::</span>CommandBuffer<span class="token punctuation">)</span><span class="token punctuation">,</span> failure<span class="token punctuation">::</span>Error<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> rgba <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">as_rgba8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> dimensions <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">dimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> size <span class="token operator">=</span> wgpu<span class="token punctuation">::</span>Extent3d <span class="token punctuation">{</span>
            width<span class="token punctuation">:</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
            depth<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> texture <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_texture</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>TextureDescriptor <span class="token punctuation">{</span>
            size<span class="token punctuation">,</span>
            array_layer_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            mip_level_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            sample_count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            dimension<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureDimension<span class="token punctuation">::</span>D2<span class="token punctuation">,</span>
            format<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureFormat<span class="token punctuation">::</span>Rgba8UnormSrgb<span class="token punctuation">,</span>
            usage<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>TextureUsage<span class="token punctuation">::</span>SAMPLED <span class="token operator">|</span> wgpu<span class="token punctuation">::</span>TextureUsage<span class="token punctuation">::</span>COPY_DST<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> buffer <span class="token operator">=</span> device
            <span class="token punctuation">.</span><span class="token function">create_buffer_mapped</span><span class="token punctuation">(</span>rgba<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wgpu<span class="token punctuation">::</span>BufferUsage<span class="token punctuation">::</span>COPY_SRC<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">fill_from_slice</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>rgba<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> <span class="token keyword">mut</span> encoder <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_command_encoder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Default<span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        encoder<span class="token punctuation">.</span><span class="token function">copy_buffer_to_texture</span><span class="token punctuation">(</span>
            wgpu<span class="token punctuation">::</span>BufferCopyView <span class="token punctuation">{</span>
                buffer<span class="token punctuation">:</span> <span class="token operator">&amp;</span>buffer<span class="token punctuation">,</span>
                offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                row_pitch<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token operator">*</span> dimensions<span class="token number">.0</span><span class="token punctuation">,</span>
                image_height<span class="token punctuation">:</span> dimensions<span class="token number">.1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> 
            wgpu<span class="token punctuation">::</span>TextureCopyView <span class="token punctuation">{</span>
                texture<span class="token punctuation">:</span> <span class="token operator">&amp;</span>texture<span class="token punctuation">,</span>
                mip_level<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                array_layer<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                origin<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>Origin3d<span class="token punctuation">::</span>ZERO<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> 
            size<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> cmd_buffer <span class="token operator">=</span> encoder<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2.</span>

        <span class="token keyword">let</span> view <span class="token operator">=</span> texture<span class="token punctuation">.</span><span class="token function">create_default_view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> sampler <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_sampler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>SamplerDescriptor <span class="token punctuation">{</span>
            address_mode_u<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>AddressMode<span class="token punctuation">::</span>ClampToEdge<span class="token punctuation">,</span>
            address_mode_v<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>AddressMode<span class="token punctuation">::</span>ClampToEdge<span class="token punctuation">,</span>
            address_mode_w<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>AddressMode<span class="token punctuation">::</span>ClampToEdge<span class="token punctuation">,</span>
            mag_filter<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>FilterMode<span class="token punctuation">::</span>Linear<span class="token punctuation">,</span>
            min_filter<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>FilterMode<span class="token punctuation">::</span>Nearest<span class="token punctuation">,</span>
            mipmap_filter<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>FilterMode<span class="token punctuation">::</span>Nearest<span class="token punctuation">,</span>
            lod_min_clamp<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">100.0</span><span class="token punctuation">,</span>
            lod_max_clamp<span class="token punctuation">:</span> <span class="token number">100.0</span><span class="token punctuation">,</span>
            compare_function<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>CompareFunction<span class="token punctuation">::</span>Always<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">Self</span> <span class="token punctuation">{</span> texture<span class="token punctuation">,</span> view<span class="token punctuation">,</span> sampler <span class="token punctuation">}</span><span class="token punctuation">,</span> cmd_buffer<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>We're using the <a href="https://docs.rs/failure/0.1.6/failure/" target="_blank" rel="noopener noreferrer">failure<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> crate to simplify error handling.</li> <li>In order to prevent importing <code>queue</code> as <code>&amp;mut</code>, we're returning a <code>CommandBuffer</code> with our texture. This means we could load multiple textures at the same time, and then submit all there command buffers at once.</li></ol> <p>We need to import <code>texture.rs</code> as a module, so somewhere at the top of <code>main.rs</code> add the following.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">mod</span> texture<span class="token punctuation">;</span>
</code></pre></div><p>Then we need to change <code>State</code> to use the <code>Texture</code> struct.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">struct</span> State <span class="token punctuation">{</span>
    diffuse_texture<span class="token punctuation">:</span> texture<span class="token punctuation">::</span>Texture<span class="token punctuation">,</span>
    diffuse_bind_group<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindGroup<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We're storing the bind group separately so that <code>Texture</code> doesn't need know how the <code>BindGroup</code> is layed out.</p> <p>The texture creation code in <code>new()</code> gets a lot simpler.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> diffuse_bytes <span class="token operator">=</span> <span class="token function">include_bytes!</span><span class="token punctuation">(</span><span class="token string">&quot;happy-tree.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">(</span>diffuse_texture<span class="token punctuation">,</span> cmd_buffer<span class="token punctuation">)</span> <span class="token operator">=</span> texture<span class="token punctuation">::</span>Texture<span class="token punctuation">::</span><span class="token function">from_bytes</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>device<span class="token punctuation">,</span> diffuse_bytes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

queue<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">[</span>cmd_buffer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Creating the <code>diffuse_bind_group</code> changes slightly to use the <code>view</code> and <code>sampler</code> fields of our <code>diffuse_texture</code>.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> diffuse_bind_group <span class="token operator">=</span> device<span class="token punctuation">.</span><span class="token function">create_bind_group</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>wgpu<span class="token punctuation">::</span>BindGroupDescriptor <span class="token punctuation">{</span>
    layout<span class="token punctuation">:</span> <span class="token operator">&amp;</span>texture_bind_group_layout<span class="token punctuation">,</span>
    bindings<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span>
        wgpu<span class="token punctuation">::</span>Binding <span class="token punctuation">{</span>
            binding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            resource<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindingResource<span class="token punctuation">::</span><span class="token function">TextureView</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_texture<span class="token punctuation">.</span>view<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        wgpu<span class="token punctuation">::</span>Binding <span class="token punctuation">{</span>
            binding<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            resource<span class="token punctuation">:</span> wgpu<span class="token punctuation">::</span>BindingResource<span class="token punctuation">::</span><span class="token function">Sampler</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>diffuse_texture<span class="token punctuation">.</span>sampler<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The code should be working the same as it was before, but now have an easier way to create textures.</p> <h2 id="challenge"><a href="#challenge" class="header-anchor">#</a> Challenge</h2> <p>Create another texture and swap it out when you press the space key.</p> <div class="auto-github-link"><a href="https://github.com/sotrh/learn-wgpu/tree/master/code/beginner/tutorial5-textures/" target="_blank" rel="noopener noreferrer">Check out the code!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/24/2020, 4:23:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/learn-wgpu/beginner/tutorial4-buffer/" class="prev">
          Buffers and Indices
        </a></span> <span class="next"><a href="/learn-wgpu/beginner/tutorial6-uniforms/">
          Uniform buffers and a 3d camera
        </a>
        →
      </span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/learn-wgpu/assets/js/app.37ce17b6.js" defer></script><script src="/learn-wgpu/assets/js/2.08ab0899.js" defer></script><script src="/learn-wgpu/assets/js/3.7ed3767e.js" defer></script><script src="/learn-wgpu/assets/js/15.d4e54dff.js" defer></script>
  </body>
</html>
